
{% for resource in resources %}
resource "aws_api_gateway_resource" "{{ resource.name }}" {
  rest_api_id = aws_api_gateway_rest_api.example.id
  parent_id   = aws_api_gateway_resource.{{ resource.parent_id }}.id
  path_part   = "{{ resource.last_path }}"
}
{% endfor %}

{% for method in methods %}
resource "aws_api_gateway_method" "{{ method.http_method | lower }}_{{ method.resource_name }}" {
  rest_api_id   = aws_api_gateway_rest_api.example.id
  resource_id   = aws_api_gateway_resource.{{ method.resource_id }}
  http_method   = "{{ method.http_method | upper }}"
  authorization = "NONE"
}
{% endfor %}
